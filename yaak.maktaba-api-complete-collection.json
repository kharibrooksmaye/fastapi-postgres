{
  "yaakVersion": "2025.8.2",
  "yaakSchema": 4,
  "timestamp": "2025-12-01T02:41:19.349776",
  "resources": {
    "workspaces": [
      {
        "model": "workspace",
        "id": "wk_maktaba_complete",
        "createdAt": "2025-11-22T00:00:00",
        "updatedAt": "2025-11-22T00:00:00",
        "authentication": {},
        "authenticationType": null,
        "description": "Complete Maktaba API collection with CSRF authentication testing and all backend endpoints",
        "headers": [],
        "name": "Maktaba API - Complete Collection",
        "encryptionKeyChallenge": null,
        "settingValidateCertificates": true,
        "settingFollowRedirects": true,
        "settingRequestTimeout": 30000
      }
    ],
    "environments": [],
    "folders": [
      {
        "model": "folder",
        "id": "fl_auth",
        "createdAt": "2025-11-22T00:00:00",
        "updatedAt": "2025-11-22T00:00:00",
        "workspaceId": "wk_maktaba_complete",
        "folderId": null,
        "authentication": {},
        "authenticationType": null,
        "description": "Authentication endpoints - login, register, refresh, logout, sessions",
        "headers": [],
        "name": "Auth",
        "sortPriority": -1000000.0
      },
      {
        "model": "folder",
        "id": "fl_password_management",
        "createdAt": "2025-11-30T00:00:00",
        "updatedAt": "2025-11-30T00:00:00",
        "workspaceId": "wk_maktaba_complete",
        "folderId": null,
        "authentication": {},
        "authenticationType": null,
        "description": "Password management endpoints - reset, change, security status",
        "headers": [],
        "name": "Password Management",
        "sortPriority": -1500000.0
      },
      {
        "model": "folder",
        "id": "fl_users",
        "createdAt": "2025-11-22T00:00:00",
        "updatedAt": "2025-11-22T00:00:00",
        "workspaceId": "wk_maktaba_complete",
        "folderId": null,
        "authentication": {},
        "authenticationType": null,
        "description": "User management endpoints",
        "headers": [],
        "name": "Users",
        "sortPriority": -2000000.0
      },
      {
        "model": "folder",
        "id": "fl_catalog",
        "createdAt": "2025-11-22T00:00:00",
        "updatedAt": "2025-11-22T00:00:00",
        "workspaceId": "wk_maktaba_complete",
        "folderId": null,
        "authentication": {},
        "authenticationType": null,
        "description": "Catalog/items management - books, CDs, DVDs, magazines, etc.",
        "headers": [],
        "name": "Catalog (Items)",
        "sortPriority": -3000000.0
      },
      {
        "model": "folder",
        "id": "fl_circulation",
        "createdAt": "2025-11-22T00:00:00",
        "updatedAt": "2025-11-22T00:00:00",
        "workspaceId": "wk_maktaba_complete",
        "folderId": null,
        "authentication": {},
        "authenticationType": null,
        "description": "Circulation endpoints - checkout, return, renew",
        "headers": [],
        "name": "Circulation",
        "sortPriority": -4000000.0
      },
      {
        "model": "folder",
        "id": "fl_fines",
        "createdAt": "2025-11-22T00:00:00",
        "updatedAt": "2025-11-22T00:00:00",
        "workspaceId": "wk_maktaba_complete",
        "folderId": null,
        "authentication": {},
        "authenticationType": null,
        "description": "Fines management and Stripe payment integration",
        "headers": [],
        "name": "Fines & Payments",
        "sortPriority": -5000000.0
      },
      {
        "model": "folder",
        "id": "fl_csrf_tests",
        "createdAt": "2025-11-22T00:00:00",
        "updatedAt": "2025-11-22T00:00:00",
        "workspaceId": "wk_maktaba_complete",
        "folderId": null,
        "authentication": {},
        "authenticationType": null,
        "description": "CSRF security testing - attack simulations that should fail",
        "headers": [],
        "name": "CSRF Security Tests",
        "sortPriority": -6000000.0
      }
    ],
    "httpRequests": [
      {
        "model": "http_request",
        "id": "rq_auth_login",
        "createdAt": "2025-11-22T00:00:00",
        "updatedAt": "2025-11-22T00:00:00",
        "workspaceId": "wk_maktaba_complete",
        "folderId": "fl_auth",
        "authentication": {},
        "authenticationType": null,
        "body": {
          "form": [
            {
              "enabled": true,
              "id": "login_username",
              "name": "username",
              "value": "${[ username ]}"
            },
            {
              "enabled": true,
              "id": "login_password",
              "name": "password",
              "value": "${[ password ]}"
            },
            {
              "enabled": false,
              "id": "login_remember",
              "name": "remember_me",
              "value": "true"
            }
          ]
        },
        "bodyType": "multipart/form-data",
        "description": "Login with username/password. Returns access_token, csrf_token, and sets httpOnly refresh_token cookie.\n\nOptional: Set remember_me=true for extended session (90 days).\n\nAfter running: Copy access_token and csrf_token to environment variables.",
        "headers": [
          {
            "enabled": true,
            "name": "Content-Type",
            "value": "multipart/form-data",
            "id": "auth_content_type"
          }
        ],
        "method": "POST",
        "name": "Login",
        "sortPriority": -1001000.0,
        "url": "${[ backend_url ]}/auth/login",
        "urlParameters": []
      },
      {
        "model": "http_request",
        "id": "rq_auth_token",
        "createdAt": "2025-11-22T00:00:00",
        "updatedAt": "2025-11-22T00:00:00",
        "workspaceId": "wk_maktaba_complete",
        "folderId": "fl_auth",
        "authentication": {},
        "authenticationType": null,
        "body": {
          "form": [
            {
              "enabled": true,
              "id": "token_username",
              "name": "username",
              "value": "${[ username ]}"
            },
            {
              "enabled": true,
              "id": "token_password",
              "name": "password",
              "value": "${[ password ]}"
            }
          ]
        },
        "bodyType": "multipart/form-data",
        "description": "Get access token (alternative login endpoint). Same as /login but different path.\n\nAfter running: Copy access_token and csrf_token to environment variables.",
        "headers": [
          {
            "enabled": true,
            "name": "Content-Type",
            "value": "multipart/form-data",
            "id": "token_content_type"
          }
        ],
        "method": "POST",
        "name": "Get Token",
        "sortPriority": -1002000.0,
        "url": "${[ backend_url ]}/auth/token",
        "urlParameters": []
      },
      {
        "model": "http_request",
        "id": "rq_auth_register",
        "createdAt": "2025-11-22T00:00:00",
        "updatedAt": "2025-11-22T00:00:00",
        "workspaceId": "wk_maktaba_complete",
        "folderId": "fl_auth",
        "authentication": {},
        "authenticationType": null,
        "body": {
          "text": "{\n  \"username\": \"${[ new_username ]}\",\n  \"password\": \"${[ new_password ]}\",\n  \"email\": \"${[ new_email ]}\",\n  \"name\": \"${[ new_name ]}\"\n}"
        },
        "bodyType": "application/json",
        "description": "Register a new user account.\n\nRequired fields: username, password\nOptional fields: email, name, phone_number, type, etc.",
        "headers": [
          {
            "enabled": true,
            "name": "Content-Type",
            "value": "application/json",
            "id": "register_content_type"
          }
        ],
        "method": "POST",
        "name": "Register",
        "sortPriority": -1003000.0,
        "url": "${[ backend_url ]}/auth/register",
        "urlParameters": []
      },
      {
        "model": "http_request",
        "id": "rq_auth_refresh",
        "createdAt": "2025-11-22T00:00:00",
        "updatedAt": "2025-11-22T00:00:00",
        "workspaceId": "wk_maktaba_complete",
        "folderId": "fl_auth",
        "authentication": {},
        "authenticationType": null,
        "body": {},
        "bodyType": null,
        "description": "Refresh access token using httpOnly cookie + CSRF token.\n\nRequires:\n- refresh_token cookie (automatic)\n- X-CSRF-Token header\n\nReturns new access_token.\n\nAfter running: Copy new access_token to environment.",
        "headers": [
          {
            "enabled": true,
            "name": "X-CSRF-Token",
            "value": "${[ csrf_token ]}",
            "id": "refresh_csrf"
          }
        ],
        "method": "POST",
        "name": "Refresh Access Token",
        "sortPriority": -1004000.0,
        "url": "${[ backend_url ]}/auth/refresh",
        "urlParameters": []
      },
      {
        "model": "http_request",
        "id": "rq_auth_logout",
        "createdAt": "2025-11-22T00:00:00",
        "updatedAt": "2025-11-22T00:00:00",
        "workspaceId": "wk_maktaba_complete",
        "folderId": "fl_auth",
        "authentication": {
          "disabled": false,
          "token": "${[ access_token ]}"
        },
        "authenticationType": "bearer",
        "body": {},
        "bodyType": null,
        "description": "Logout current user. Revokes refresh token and clears httpOnly cookie.\n\nRequires: Bearer token (access_token)\n\nAfter running: Clear access_token and csrf_token in environment.",
        "headers": [],
        "method": "POST",
        "name": "Logout",
        "sortPriority": -1005000.0,
        "url": "${[ backend_url ]}/auth/logout",
        "urlParameters": []
      },
      {
        "model": "http_request",
        "id": "rq_auth_sessions",
        "createdAt": "2025-11-22T00:00:00",
        "updatedAt": "2025-11-22T00:00:00",
        "workspaceId": "wk_maktaba_complete",
        "folderId": "fl_auth",
        "authentication": {
          "disabled": false,
          "token": "${[ access_token ]}"
        },
        "authenticationType": "bearer",
        "body": {},
        "bodyType": null,
        "description": "Get all active sessions (refresh tokens) for current user.\n\nShows device name, IP address, user agent, creation time, last used, expiration.",
        "headers": [],
        "method": "GET",
        "name": "Get Sessions",
        "sortPriority": -1006000.0,
        "url": "${[ backend_url ]}/auth/sessions",
        "urlParameters": []
      },
      {
        "model": "http_request",
        "id": "rq_auth_revoke_session",
        "createdAt": "2025-11-22T00:00:00",
        "updatedAt": "2025-11-22T00:00:00",
        "workspaceId": "wk_maktaba_complete",
        "folderId": "fl_auth",
        "authentication": {
          "disabled": false,
          "token": "${[ access_token ]}"
        },
        "authenticationType": "bearer",
        "body": {},
        "bodyType": null,
        "description": "Revoke a specific session by token ID.\n\nUseful for logging out from other devices.\n\nReplace :token_id in URL with actual session ID from /sessions endpoint.",
        "headers": [],
        "method": "DELETE",
        "name": "Revoke Session",
        "sortPriority": -1007000.0,
        "url": "${[ backend_url ]}/auth/sessions/:token_id",
        "urlParameters": [
          {
            "enabled": true,
            "name": ":token_id",
            "value": "1",
            "id": "session_token_id"
          }
        ]
      },
      {
        "model": "http_request",
        "id": "rq_auth_password_reset_request",
        "createdAt": "2025-11-30T00:00:00",
        "updatedAt": "2025-11-30T00:00:00",
        "workspaceId": "wk_maktaba_complete",
        "folderId": "fl_password_management",
        "authentication": {},
        "authenticationType": null,
        "body": {
          "json": "{\n  \"email\": \"${[ test_email ]}\"\n}"
        },
        "bodyType": "application/json",
        "description": "Request password reset via email or username.\n\nSecurity: Always returns success message to prevent user enumeration.\n\nIf user exists and is active, sends password reset email with 1-hour token.\n\nUse either 'email' or 'username' field in request body.",
        "headers": [
          {
            "enabled": true,
            "name": "Content-Type",
            "value": "application/json",
            "id": "password_reset_content_type"
          }
        ],
        "method": "POST",
        "name": "Password Reset Request",
        "sortPriority": -1008000.0,
        "url": "${[ backend_url ]}/auth/password/reset-request",
        "urlParameters": []
      },
      {
        "model": "http_request",
        "id": "rq_auth_forgot_password_simple",
        "createdAt": "2025-12-01T00:00:00",
        "updatedAt": "2025-12-01T00:00:00",
        "workspaceId": "wk_maktaba_complete",
        "folderId": "fl_password_management",
        "authentication": {},
        "authenticationType": null,
        "body": {
          "text": "{\n  \"email\": \"user@example.com\"\n}",
          "mimeType": "application/json"
        },
        "bodyType": "text",
        "description": "Simplified password reset using email only (user-friendly alias).\n\nSame functionality as Password Reset Request but with simplified email-only input.\n\nIdeal for consumer applications with simple UX requirements.\n\nSecurity: Always returns success message to prevent user enumeration.",
        "headers": [
          {
            "id": "forgot_password_simple_content_type",
            "name": "Content-Type",
            "value": "application/json"
          }
        ],
        "method": "POST",
        "name": "Forgot Password (Simple)",
        "sortPriority": -1007500.0,
        "url": "${[ backend_url ]}/auth/forgot-password",
        "urlParameters": []
      },
      {
        "model": "http_request",
        "id": "rq_auth_password_reset_confirm",
        "createdAt": "2025-11-30T00:00:00",
        "updatedAt": "2025-11-30T00:00:00",
        "workspaceId": "wk_maktaba_complete",
        "folderId": "fl_password_management",
        "authentication": {},
        "authenticationType": null,
        "body": {
          "json": "{\n  \"token\": \"${[ reset_token ]}\",\n  \"new_password\": \"${[ new_password ]}\",\n  \"confirm_password\": \"${[ new_password ]}\"\n}"
        },
        "bodyType": "application/json",
        "description": "Complete password reset using token from email.\n\nRequires:\n- Valid reset token (1-hour expiry)\n- New password (min 8 characters)\n- Password confirmation match\n\nAutomatically unlocks account and sends confirmation email.",
        "headers": [
          {
            "enabled": true,
            "name": "Content-Type",
            "value": "application/json",
            "id": "password_confirm_content_type"
          }
        ],
        "method": "POST",
        "name": "Password Reset Confirm",
        "sortPriority": -1009000.0,
        "url": "${[ backend_url ]}/auth/password/reset-confirm",
        "urlParameters": []
      },
      {
        "model": "http_request",
        "id": "rq_auth_password_reset_form",
        "createdAt": "2025-11-30T00:00:00",
        "updatedAt": "2025-11-30T00:00:00",
        "workspaceId": "wk_maktaba_complete",
        "folderId": "fl_password_management",
        "authentication": {},
        "authenticationType": null,
        "body": {},
        "bodyType": null,
        "description": "Validate password reset token from email link (GET method).\n\nThis endpoint handles GET requests when users click reset links in their email.\n\nValidates the token and returns form information for password reset.\n\nReturns token validity status, expiration info, and form action details.",
        "headers": [],
        "method": "GET",
        "name": "Password Reset Form (GET)",
        "sortPriority": -1008500.0,
        "url": "${[ backend_url ]}/auth/password/reset-confirm?token=reset_token_from_email",
        "urlParameters": [
          {
            "id": "reset_token_param",
            "name": "token",
            "value": "reset_token_from_email"
          }
        ]
      },
      {
        "model": "http_request",
        "id": "rq_auth_password_change",
        "createdAt": "2025-11-30T00:00:00",
        "updatedAt": "2025-11-30T00:00:00",
        "workspaceId": "wk_maktaba_complete",
        "folderId": "fl_password_management",
        "authentication": {
          "disabled": false,
          "token": "${[ access_token ]}"
        },
        "authenticationType": "bearer",
        "body": {
          "json": "{\n  \"current_password\": \"${[ password ]}\",\n  \"new_password\": \"${[ new_password ]}\",\n  \"confirm_password\": \"${[ new_password ]}\"\n}"
        },
        "bodyType": "application/json",
        "description": "Change password for authenticated user.\n\nRequires:\n- Valid access token (Bearer authentication)\n- Current password verification\n- New password (min 8 characters, different from current)\n- Password confirmation match\n\nResets failed login attempts and sends notification email.",
        "headers": [
          {
            "enabled": true,
            "name": "Content-Type",
            "value": "application/json",
            "id": "password_change_content_type"
          }
        ],
        "method": "POST",
        "name": "Password Change",
        "sortPriority": -1010000.0,
        "url": "${[ backend_url ]}/auth/password/change",
        "urlParameters": []
      },
      {
        "model": "http_request",
        "id": "rq_auth_security_status",
        "createdAt": "2025-11-30T00:00:00",
        "updatedAt": "2025-11-30T00:00:00",
        "workspaceId": "wk_maktaba_complete",
        "folderId": "fl_password_management",
        "authentication": {
          "disabled": false,
          "token": "${[ access_token ]}"
        },
        "authenticationType": "bearer",
        "body": {},
        "bodyType": null,
        "description": "Get security status for current user.\n\nReturns:\n- Account lock status and expiry\n- Failed login attempts count\n- Password expiry information\n- Password age in days\n- Security configuration settings",
        "headers": [],
        "method": "GET",
        "name": "Security Status",
        "sortPriority": -1011000.0,
        "url": "${[ backend_url ]}/auth/security/status",
        "urlParameters": []
      },
      {
        "model": "http_request",
        "id": "rq_users_me",
        "createdAt": "2025-11-22T00:00:00",
        "updatedAt": "2025-11-22T00:00:00",
        "workspaceId": "wk_maktaba_complete",
        "folderId": "fl_users",
        "authentication": {
          "disabled": false,
          "token": "${[ access_token ]}"
        },
        "authenticationType": "bearer",
        "body": {},
        "bodyType": null,
        "description": "Get current user information.\n\nReturns user profile including id, username, email, name, type, etc.",
        "headers": [],
        "method": "GET",
        "name": "Get My Info",
        "sortPriority": -2001000.0,
        "url": "${[ backend_url ]}/users/me/",
        "urlParameters": []
      },
      {
        "model": "http_request",
        "id": "rq_users_list",
        "createdAt": "2025-11-22T00:00:00",
        "updatedAt": "2025-11-22T00:00:00",
        "workspaceId": "wk_maktaba_complete",
        "folderId": "fl_users",
        "authentication": {
          "disabled": false,
          "token": "${[ access_token ]}"
        },
        "authenticationType": "bearer",
        "body": {},
        "bodyType": null,
        "description": "Get list of all users (Admin/Librarian only).\n\nSupports pagination: ?skip=0&limit=100",
        "headers": [],
        "method": "GET",
        "name": "Get All Users",
        "sortPriority": -2002000.0,
        "url": "${[ backend_url ]}/users/",
        "urlParameters": [
          {
            "enabled": false,
            "name": "skip",
            "value": "0",
            "id": "users_skip"
          },
          {
            "enabled": false,
            "name": "limit",
            "value": "100",
            "id": "users_limit"
          }
        ]
      },
      {
        "model": "http_request",
        "id": "rq_users_get",
        "createdAt": "2025-11-22T00:00:00",
        "updatedAt": "2025-11-22T00:00:00",
        "workspaceId": "wk_maktaba_complete",
        "folderId": "fl_users",
        "authentication": {
          "disabled": false,
          "token": "${[ access_token ]}"
        },
        "authenticationType": "bearer",
        "body": {},
        "bodyType": null,
        "description": "Get specific user by ID (Admin/Librarian only).\n\nReplace user_id in URL with actual ID.",
        "headers": [],
        "method": "GET",
        "name": "Get User by ID",
        "sortPriority": -2003000.0,
        "url": "${[ backend_url ]}/users/${[ user_id ]}",
        "urlParameters": []
      },
      {
        "model": "http_request",
        "id": "rq_users_create",
        "createdAt": "2025-11-22T00:00:00",
        "updatedAt": "2025-11-22T00:00:00",
        "workspaceId": "wk_maktaba_complete",
        "folderId": "fl_users",
        "authentication": {
          "disabled": false,
          "token": "${[ access_token ]}"
        },
        "authenticationType": "bearer",
        "body": {
          "text": "{\n  \"username\": \"${[ admin_username ]}\",\n  \"password\": \"${[ admin_password ]}\",\n  \"email\": \"${[ admin_email ]}\",\n  \"name\": \"${[ admin_name ]}\",\n  \"type\": \"${[ user_type ]}\"\n}"
        },
        "bodyType": "application/json",
        "description": "Create new user (Admin/Librarian only).\n\nAllows setting user type (admin, librarian, patron).",
        "headers": [
          {
            "enabled": true,
            "name": "Content-Type",
            "value": "application/json",
            "id": "users_create_content"
          }
        ],
        "method": "POST",
        "name": "Create User",
        "sortPriority": -2004000.0,
        "url": "${[ backend_url ]}/users/",
        "urlParameters": []
      },
      {
        "model": "http_request",
        "id": "rq_users_delete",
        "createdAt": "2025-11-22T00:00:00",
        "updatedAt": "2025-11-22T00:00:00",
        "workspaceId": "wk_maktaba_complete",
        "folderId": "fl_users",
        "authentication": {
          "disabled": false,
          "token": "${[ access_token ]}"
        },
        "authenticationType": "bearer",
        "body": {},
        "bodyType": null,
        "description": "Delete user by ID (Admin only).\n\nReplace user_id in URL with actual ID.",
        "headers": [],
        "method": "DELETE",
        "name": "Delete User",
        "sortPriority": -2005000.0,
        "url": "${[ backend_url ]}/users/${[ user_id ]}",
        "urlParameters": []
      },
      {
        "model": "http_request",
        "id": "rq_catalog_list",
        "createdAt": "2025-11-22T00:00:00",
        "updatedAt": "2025-11-22T00:00:00",
        "workspaceId": "wk_maktaba_complete",
        "folderId": "fl_catalog",
        "authentication": {
          "disabled": false,
          "token": "${[ access_token ]}"
        },
        "authenticationType": "bearer",
        "body": {},
        "bodyType": null,
        "description": "Get all catalog items.\n\nSupports filtering: ?q=catalog_events",
        "headers": [],
        "method": "GET",
        "name": "Get All Items",
        "sortPriority": -3001000.0,
        "url": "${[ backend_url ]}/catalog/",
        "urlParameters": [
          {
            "enabled": false,
            "name": "q",
            "value": "catalog_events",
            "id": "catalog_filter"
          }
        ]
      },
      {
        "model": "http_request",
        "id": "rq_catalog_books",
        "createdAt": "2025-11-22T00:00:00",
        "updatedAt": "2025-11-22T00:00:00",
        "workspaceId": "wk_maktaba_complete",
        "folderId": "fl_catalog",
        "authentication": {
          "disabled": false,
          "token": "${[ access_token ]}"
        },
        "authenticationType": "bearer",
        "body": {},
        "bodyType": null,
        "description": "Get all books from catalog.\n\nOther types: cds, dvds, magazines, newspapers, journals",
        "headers": [],
        "method": "GET",
        "name": "Get Books",
        "sortPriority": -3002000.0,
        "url": "${[ backend_url ]}/catalog/books",
        "urlParameters": []
      },
      {
        "model": "http_request",
        "id": "rq_catalog_get_item",
        "createdAt": "2025-11-22T00:00:00",
        "updatedAt": "2025-11-22T00:00:00",
        "workspaceId": "wk_maktaba_complete",
        "folderId": "fl_catalog",
        "authentication": {
          "disabled": false,
          "token": "${[ access_token ]}"
        },
        "authenticationType": "bearer",
        "body": {},
        "bodyType": null,
        "description": "Get specific item by type and ID.\n\nExample: /catalog/books/1",
        "headers": [],
        "method": "GET",
        "name": "Get Item by ID",
        "sortPriority": -3003000.0,
        "url": "${[ backend_url ]}/catalog/books/${[ item_id ]}",
        "urlParameters": []
      },
      {
        "model": "http_request",
        "id": "rq_catalog_create",
        "createdAt": "2025-11-22T00:00:00",
        "updatedAt": "2025-11-22T00:00:00",
        "workspaceId": "wk_maktaba_complete",
        "folderId": "fl_catalog",
        "authentication": {
          "disabled": false,
          "token": "${[ access_token ]}"
        },
        "authenticationType": "bearer",
        "body": {
          "text": "{\n  \"title\": \"New Book\",\n  \"author\": \"John Doe\",\n  \"isbn\": \"1234567890\",\n  \"call_number\": \"823\",\n  \"publisher\": \"Test Publisher\",\n  \"publish_date\": \"2024-01-01\"\n}"
        },
        "bodyType": "application/json",
        "description": "Create new catalog item (Admin/Librarian only).\n\nReplace 'books' with item type: books, cds, dvds, magazines, newspapers, journals",
        "headers": [
          {
            "enabled": true,
            "name": "Content-Type",
            "value": "application/json",
            "id": "catalog_create_content"
          }
        ],
        "method": "POST",
        "name": "Create Item",
        "sortPriority": -3004000.0,
        "url": "${[ backend_url ]}/catalog/books/",
        "urlParameters": []
      },
      {
        "model": "http_request",
        "id": "rq_catalog_update",
        "createdAt": "2025-11-22T00:00:00",
        "updatedAt": "2025-11-22T00:00:00",
        "workspaceId": "wk_maktaba_complete",
        "folderId": "fl_catalog",
        "authentication": {
          "disabled": false,
          "token": "${[ access_token ]}"
        },
        "authenticationType": "bearer",
        "body": {
          "text": "{\n  \"title\": \"Updated Book Title\",\n  \"author\": \"John Doe Updated\"\n}"
        },
        "bodyType": "application/json",
        "description": "Update existing catalog item (Admin/Librarian only).\n\nPartial updates supported - only include fields to update.",
        "headers": [
          {
            "enabled": true,
            "name": "Content-Type",
            "value": "application/json",
            "id": "catalog_update_content"
          }
        ],
        "method": "PUT",
        "name": "Update Item",
        "sortPriority": -3005000.0,
        "url": "${[ backend_url ]}/catalog/books/${[ item_id ]}",
        "urlParameters": []
      },
      {
        "model": "http_request",
        "id": "rq_catalog_delete",
        "createdAt": "2025-11-22T00:00:00",
        "updatedAt": "2025-11-22T00:00:00",
        "workspaceId": "wk_maktaba_complete",
        "folderId": "fl_catalog",
        "authentication": {
          "disabled": false,
          "token": "${[ access_token ]}"
        },
        "authenticationType": "bearer",
        "body": {},
        "bodyType": null,
        "description": "Delete catalog item (Admin/Librarian only).",
        "headers": [],
        "method": "DELETE",
        "name": "Delete Item",
        "sortPriority": -3006000.0,
        "url": "${[ backend_url ]}/catalog/books/${[ item_id ]}",
        "urlParameters": []
      },
      {
        "model": "http_request",
        "id": "rq_catalog_upload_image",
        "createdAt": "2025-11-22T00:00:00",
        "updatedAt": "2025-11-22T00:00:00",
        "workspaceId": "wk_maktaba_complete",
        "folderId": "fl_catalog",
        "authentication": {
          "disabled": false,
          "token": "${[ access_token ]}"
        },
        "authenticationType": "bearer",
        "body": {},
        "bodyType": "multipart/form-data",
        "description": "Upload image to Supabase storage.\n\nUse file field in form-data to attach image file.",
        "headers": [],
        "method": "POST",
        "name": "Upload Image",
        "sortPriority": -3007000.0,
        "url": "${[ backend_url ]}/catalog/upload_image/",
        "urlParameters": []
      },
      {
        "model": "http_request",
        "id": "rq_circulation_list",
        "createdAt": "2025-11-22T00:00:00",
        "updatedAt": "2025-11-22T00:00:00",
        "workspaceId": "wk_maktaba_complete",
        "folderId": "fl_circulation",
        "authentication": {
          "disabled": false,
          "token": "${[ access_token ]}"
        },
        "authenticationType": "bearer",
        "body": {},
        "bodyType": null,
        "description": "Get all circulation events (Admin/Librarian only).\n\nShows checkout, return, renew events with user and item details.",
        "headers": [],
        "method": "GET",
        "name": "Get All Events",
        "sortPriority": -4001000.0,
        "url": "${[ backend_url ]}/circulation/",
        "urlParameters": []
      },
      {
        "model": "http_request",
        "id": "rq_circulation_me",
        "createdAt": "2025-11-22T00:00:00",
        "updatedAt": "2025-11-22T00:00:00",
        "workspaceId": "wk_maktaba_complete",
        "folderId": "fl_circulation",
        "authentication": {
          "disabled": false,
          "token": "${[ access_token ]}"
        },
        "authenticationType": "bearer",
        "body": {},
        "bodyType": null,
        "description": "Get current user's circulation events.\n\nShows your checkouts, returns, renewals.",
        "headers": [],
        "method": "GET",
        "name": "Get My Events",
        "sortPriority": -4002000.0,
        "url": "${[ backend_url ]}/circulation/me",
        "urlParameters": []
      },
      {
        "model": "http_request",
        "id": "rq_circulation_checkout",
        "createdAt": "2025-11-22T00:00:00",
        "updatedAt": "2025-11-22T00:00:00",
        "workspaceId": "wk_maktaba_complete",
        "folderId": "fl_circulation",
        "authentication": {
          "disabled": false,
          "token": "${[ access_token ]}"
        },
        "authenticationType": "bearer",
        "body": {
          "text": "[1, 2, 3]"
        },
        "bodyType": "application/json",
        "description": "Checkout items for user (Admin/Librarian only).\n\nReplace :user_id in URL. Body is array of item IDs.\n\nActions: checkout, return, renew",
        "headers": [
          {
            "enabled": true,
            "name": "Content-Type",
            "value": "application/json",
            "id": "circulation_content"
          }
        ],
        "method": "POST",
        "name": "Checkout Items",
        "sortPriority": -4003000.0,
        "url": "${[ backend_url ]}/circulation/checkout/:user_id",
        "urlParameters": [
          {
            "enabled": true,
            "name": ":user_id",
            "value": "${[ user_id ]}",
            "id": "circulation_user_id"
          }
        ]
      },
      {
        "model": "http_request",
        "id": "rq_fines_list",
        "createdAt": "2025-11-22T00:00:00",
        "updatedAt": "2025-11-22T00:00:00",
        "workspaceId": "wk_maktaba_complete",
        "folderId": "fl_fines",
        "authentication": {
          "disabled": false,
          "token": "${[ access_token ]}"
        },
        "authenticationType": "bearer",
        "body": {},
        "bodyType": null,
        "description": "Get all fines (Admin/Librarian only).\n\nIncludes user and item details.",
        "headers": [],
        "method": "GET",
        "name": "Get All Fines",
        "sortPriority": -5001000.0,
        "url": "${[ backend_url ]}/fines/",
        "urlParameters": []
      },
      {
        "model": "http_request",
        "id": "rq_fines_me",
        "createdAt": "2025-11-22T00:00:00",
        "updatedAt": "2025-11-22T00:00:00",
        "workspaceId": "wk_maktaba_complete",
        "folderId": "fl_fines",
        "authentication": {
          "disabled": false,
          "token": "${[ access_token ]}"
        },
        "authenticationType": "bearer",
        "body": {},
        "bodyType": null,
        "description": "Get current user's fines.\n\nShows all fines (paid and unpaid) for authenticated user.",
        "headers": [],
        "method": "GET",
        "name": "Get My Fines",
        "sortPriority": -5002000.0,
        "url": "${[ backend_url ]}/fines/me",
        "urlParameters": []
      },
      {
        "model": "http_request",
        "id": "rq_fines_get",
        "createdAt": "2025-11-22T00:00:00",
        "updatedAt": "2025-11-22T00:00:00",
        "workspaceId": "wk_maktaba_complete",
        "folderId": "fl_fines",
        "authentication": {
          "disabled": false,
          "token": "${[ access_token ]}"
        },
        "authenticationType": "bearer",
        "body": {},
        "bodyType": null,
        "description": "Get specific fine by ID.\n\nUsers can only view their own fines. Staff can view all fines.",
        "headers": [],
        "method": "GET",
        "name": "Get Fine by ID",
        "sortPriority": -5003000.0,
        "url": "${[ backend_url ]}/fines/fine/${[ fine_id ]}",
        "urlParameters": []
      },
      {
        "model": "http_request",
        "id": "rq_fines_user",
        "createdAt": "2025-11-22T00:00:00",
        "updatedAt": "2025-11-22T00:00:00",
        "workspaceId": "wk_maktaba_complete",
        "folderId": "fl_fines",
        "authentication": {
          "disabled": false,
          "token": "${[ access_token ]}"
        },
        "authenticationType": "bearer",
        "body": {},
        "bodyType": null,
        "description": "Get all fines for specific user (Admin/Librarian only).",
        "headers": [],
        "method": "GET",
        "name": "Get User Fines",
        "sortPriority": -5004000.0,
        "url": "${[ backend_url ]}/fines/${[ user_id ]}",
        "urlParameters": []
      },
      {
        "model": "http_request",
        "id": "rq_fines_pay",
        "createdAt": "2025-11-22T00:00:00",
        "updatedAt": "2025-11-22T00:00:00",
        "workspaceId": "wk_maktaba_complete",
        "folderId": "fl_fines",
        "authentication": {
          "disabled": false,
          "token": "${[ access_token ]}"
        },
        "authenticationType": "bearer",
        "body": {},
        "bodyType": null,
        "description": "Create Stripe payment intent for single fine.\n\nReturns client_secret for frontend payment processing.",
        "headers": [],
        "method": "POST",
        "name": "Pay Fine",
        "sortPriority": -5005000.0,
        "url": "${[ backend_url ]}/fines/pay/${[ fine_id ]}",
        "urlParameters": []
      },
      {
        "model": "http_request",
        "id": "rq_fines_pay_multiple",
        "createdAt": "2025-11-22T00:00:00",
        "updatedAt": "2025-11-22T00:00:00",
        "workspaceId": "wk_maktaba_complete",
        "folderId": "fl_fines",
        "authentication": {
          "disabled": false,
          "token": "${[ access_token ]}"
        },
        "authenticationType": "bearer",
        "body": {
          "text": "{\n  \"fine_ids\": [1, 2, 3]\n}"
        },
        "bodyType": "application/json",
        "description": "Create Stripe payment intent for multiple fines.\n\nPay multiple fines in single transaction.",
        "headers": [
          {
            "enabled": true,
            "name": "Content-Type",
            "value": "application/json",
            "id": "pay_multiple_content"
          }
        ],
        "method": "POST",
        "name": "Pay Multiple Fines",
        "sortPriority": -5006000.0,
        "url": "${[ backend_url ]}/fines/pay_multiple/",
        "urlParameters": []
      },
      {
        "model": "http_request",
        "id": "rq_fines_finalize",
        "createdAt": "2025-11-22T00:00:00",
        "updatedAt": "2025-11-22T00:00:00",
        "workspaceId": "wk_maktaba_complete",
        "folderId": "fl_fines",
        "authentication": {
          "disabled": false,
          "token": "${[ access_token ]}"
        },
        "authenticationType": "bearer",
        "body": {
          "text": "{\n  \"fines\": [1, 2, 3],\n  \"payment_intent_id\": \"pi_xxxxx\"\n}"
        },
        "bodyType": "application/json",
        "description": "Finalize payment after Stripe confirmation (Admin/Librarian only).\n\nMarks fines as paid with payment_intent_id.",
        "headers": [
          {
            "enabled": true,
            "name": "Content-Type",
            "value": "application/json",
            "id": "finalize_content"
          }
        ],
        "method": "PUT",
        "name": "Finalize Payment",
        "sortPriority": -5007000.0,
        "url": "${[ backend_url ]}/fines/finalize_payment/",
        "urlParameters": []
      },
      {
        "model": "http_request",
        "id": "rq_fines_delete",
        "createdAt": "2025-11-22T00:00:00",
        "updatedAt": "2025-11-22T00:00:00",
        "workspaceId": "wk_maktaba_complete",
        "folderId": "fl_fines",
        "authentication": {
          "disabled": false,
          "token": "${[ access_token ]}"
        },
        "authenticationType": "bearer",
        "body": {},
        "bodyType": null,
        "description": "Delete specific fine (Admin only).",
        "headers": [],
        "method": "DELETE",
        "name": "Delete Fine",
        "sortPriority": -5008000.0,
        "url": "${[ backend_url ]}/fines/${[ fine_id ]}",
        "urlParameters": []
      },
      {
        "model": "http_request",
        "id": "rq_fines_delete_all",
        "createdAt": "2025-11-22T00:00:00",
        "updatedAt": "2025-11-22T00:00:00",
        "workspaceId": "wk_maktaba_complete",
        "folderId": "fl_fines",
        "authentication": {
          "disabled": false,
          "token": "${[ access_token ]}"
        },
        "authenticationType": "bearer",
        "body": {},
        "bodyType": null,
        "description": "⚠️ Delete ALL fines (Admin only). Use with caution!",
        "headers": [],
        "method": "DELETE",
        "name": "Delete All Fines",
        "sortPriority": -5009000.0,
        "url": "${[ backend_url ]}/fines/",
        "urlParameters": []
      },
      {
        "model": "http_request",
        "id": "rq_csrf_missing",
        "createdAt": "2025-11-22T00:00:00",
        "updatedAt": "2025-11-22T00:00:00",
        "workspaceId": "wk_maktaba_complete",
        "folderId": "fl_csrf_tests",
        "authentication": {},
        "authenticationType": null,
        "body": {},
        "bodyType": null,
        "description": "⚠️ SECURITY TEST: Attempt refresh without CSRF token.\n\nExpected: 403 Forbidden\nExpected error: \"CSRF token required when using cookie-based authentication\"",
        "headers": [],
        "method": "POST",
        "name": "CSRF Missing (Should Fail)",
        "sortPriority": -6001000.0,
        "url": "${[ backend_url ]}/auth/refresh",
        "urlParameters": []
      },
      {
        "model": "http_request",
        "id": "rq_csrf_invalid",
        "createdAt": "2025-11-22T00:00:00",
        "updatedAt": "2025-11-22T00:00:00",
        "workspaceId": "wk_maktaba_complete",
        "folderId": "fl_csrf_tests",
        "authentication": {},
        "authenticationType": null,
        "body": {},
        "bodyType": null,
        "description": "⚠️ SECURITY TEST: Attempt refresh with invalid CSRF token.\n\nExpected: 403 Forbidden\nExpected error: \"Invalid CSRF token\"",
        "headers": [
          {
            "enabled": true,
            "name": "X-CSRF-Token",
            "value": "invalid_fake_token_12345",
            "id": "csrf_invalid_header"
          }
        ],
        "method": "POST",
        "name": "CSRF Invalid (Should Fail)",
        "sortPriority": -6002000.0,
        "url": "${[ backend_url ]}/auth/refresh",
        "urlParameters": []
      },
      {
        "model": "http_request",
        "id": "rq_no_auth",
        "createdAt": "2025-11-22T00:00:00",
        "updatedAt": "2025-11-22T00:00:00",
        "workspaceId": "wk_maktaba_complete",
        "folderId": "fl_csrf_tests",
        "authentication": {},
        "authenticationType": null,
        "body": {},
        "bodyType": null,
        "description": "⚠️ SECURITY TEST: Attempt to access protected resource without token.\n\nExpected: 401 Unauthorized\nExpected error: \"Not authenticated\"",
        "headers": [],
        "method": "GET",
        "name": "No Authorization (Should Fail)",
        "sortPriority": -6003000.0,
        "url": "${[ backend_url ]}/users/me/",
        "urlParameters": []
      }
    ],
    "grpcRequests": [],
    "websocketRequests": []
  }
}